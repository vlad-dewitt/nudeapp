{
  "version": 3,
  "file": "media_viewer.js",
  "sourceRoot": "../../../..",
  "sources": [
    "coffee/imports/ui/parts/media_viewer.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "import Carousel from '../../tools/carousel'\n\n\n\nMediaViewer = class extends Component\n  constructor: (props) ->\n    super props\n    @state =\n      objects: []\n      current_object: {}\n      orientation: 'PORTRAIT'\n    @zoom =\n      scale: new Animated.Value 1\n      position:\n        x: 0\n        y: 0\n      translateX: new Animated.Value 0\n      translateY: new Animated.Value 0\n    @videos = {}\n\n\n\n  componentDidMount: =>\n    ScreenOrientation.unlockAsync()\n    ScreenOrientation.addOrientationChangeListener @onOrientationChange\n    @init()\n\n  componentDidUpdate: =>\n    @init()\n\n  componentWillUnmount: =>\n    Ambry.call 'clearMediaViewer'\n    ScreenOrientation.removeOrientationChangeListeners()\n    ScreenOrientation.lockAsync ScreenOrientation.Orientation.PORTRAIT\n\n\n\n  init: =>\n    if not _.isEqual @props.app.media_viewer.objects, @state.objects\n      objects = []\n\n      @props.app.media_viewer.objects.map (object, num) =>\n        object.index = num\n        objects.push object\n\n      @setState\n        objects: objects\n        current_object: objects[@props.app.media_viewer.first]\n\n  onOrientationChange: (e) =>\n    orientation = if e.orientationInfo.orientation.includes 'PORTRAIT' then 'PORTRAIT' else 'LANDSCAPE'\n    @setState\n      orientation: orientation\n    @changeObject @state.current_object.index\n\n  changeObject: (number) =>\n    if @videos[@state.current_object.id]\n      @videos[@state.current_object.id].stopAsync()\n    @setState\n      current_object: @state.objects[number]\n\n  videoPlaybackStatusChange: (status) =>\n    if status.isPlaying\n      playing = yes\n    else\n      playing = no\n\n    if @state.current_object.isPlaying isnt playing\n      @setState\n        current_object: {\n          @state.current_object...\n          isPlaying: playing\n        }\n      , =>\n        if playing\n          @focus()\n\n  focus: (value) =>\n    if value isnt yes and value isnt no\n      value = if @props.app.media_viewer.focus is yes then no else yes\n\n    if @props.app.media_viewer.focus isnt value\n      if @state.current_object.isPlaying\n        Ambry.call 'setMediaViewerFocus', yes\n      else\n        Ambry.call 'setMediaViewerFocus', value\n\n  pinch: ({ nativeEvent: event }) =>\n    if event.state is GestureState.ACTIVE\n      @focus yes\n      if event.scale > 0.8 and event.scale < 3\n        Animated.spring(@zoom.scale, toValue: event.scale, speed: 400, useNativeDriver: yes).start()\n      Animated.spring(@zoom.translateX, toValue: event.focalX - @zoom.position.x, speed: 400, useNativeDriver: yes).start()\n      Animated.spring(@zoom.translateY, toValue: event.focalY - @zoom.position.y, speed: 400, useNativeDriver: yes).start()\n\n  pinchStateChange: ({ nativeEvent: event }) =>\n    if event.state is GestureState.BEGAN\n      @zoom.position =\n        x: event.focalX\n        y: event.focalY\n    if event.state is GestureState.END\n      @zoom.position =\n        x: 0\n        y: 0\n      Animated.timing(@zoom.scale, toValue: 1, duration: 200, useNativeDriver: yes).start()\n      Animated.timing(@zoom.translateX, toValue: 0, duration: 200, useNativeDriver: yes).start()\n      Animated.timing(@zoom.translateY, toValue: 0, duration: 200, useNativeDriver: yes).start()\n\n  share: =>\n    Sharing.shareAsync @state.current_object.path\n\n  export: =>\n    Alert.alert \"Export this files?\", '',\n      [\n        {\n          text: 'No'\n          style: 'cancel'\n        }\n        {\n          text: 'Yes'\n          onPress: =>\n            API.global.exportMedia [@state.current_object], => @cancel()\n        }\n      ]\n\n  delete: =>\n    Alert.alert 'Are you sure?', 'This action can\\'t be undone',\n      [\n        {\n          text: 'Cancel'\n          style: 'cancel'\n        }\n        {\n          text: 'Delete'\n          onPress: =>\n            API.global.removeMedia [@state.current_object]\n            @cancel()\n        }\n      ]\n\n  cancel: =>\n    @props.navigation.goBack()\n\n\n\n  render: =>\n    <View style={{ Shape.Box..., height: Dimensions.get('window').height }}>\n      {\n        if @state.objects.length > 0\n          <View style={ Shape.Content }>\n            <Carousel pageStyle={{ Shape.MediaSlider..., height: Dimensions.get('window').height }} width={ Dimensions.get('window').width } pageWidth={ Dimensions.get('window').width } swipeThreshold={ .3 } sneak={ 0 } onPageChange={ @changeObject } currentPage={ @state.current_object.index }>\n              {\n                @state.objects.map (object, num) =>\n                  if @state.current_object.index - 1 is num or @state.current_object.index is num or @state.current_object.index + 1 is num\n                    <TouchableOpacity key={ num } style={ Shape.MediaSliderItem } activeOpacity={ 1 } onPress={ @focus }>\n                      <View style={ width: '100%', height: '100%' }>\n                        {\n                          if object.type is 'image'\n                            <PinchGestureHandler onGestureEvent={ @pinch } onHandlerStateChange={ @pinchStateChange }>\n                              <Animated.Image source={{ uri: object.path }} style={{ width: '100%', height: '100%', resizeMode: 'contain', transform: [{ scale: @zoom.scale }, { translateX: 0 }, { translateY: 0 }] }}/>\n                            </PinchGestureHandler>\n                          else if object.type is 'video'\n                            <Video ref={ (ref) => @videos[object.id] = ref } source={{ uri: object.path }} rate={ 1.0 } volume={ 1.0 } isMuted={ no } resizeMode='contain' shouldPlay={ no } useNativeControls isLooping={ no } style={{ width: '100%', height: '100%' }} onPlaybackStatusUpdate={ @videoPlaybackStatusChange }/>\n                        }\n                      </View>\n                    </TouchableOpacity>\n              }\n            </Carousel>\n            {\n              if not @props.app.media_viewer.focus\n                <View style={{ Shape.MediaMenu..., top: Dimensions.get('window').height - 56, paddingHorizontal: if @state.orientation is 'PORTRAIT' then Dimensions.get('window').width / 6 else Dimensions.get('window').width / 3 }}>\n                  <StatusBar hidden={ no }/>\n                  <TouchableOpacity style={ Shape.MediaMenuIcon } activeOpacity={ .5 } onPress={ @share }>\n                    <Image source={ Assets.img.icons.share_linear_icon } style={{ width: 20, height: 20, resizeMode: 'contain', marginBottom: 5 }}/>\n                    <Text style={[Typography.Light, Typography.Little]}>Share</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity style={ Shape.MediaMenuIcon } activeOpacity={ .5 } onPress={ @export }>\n                    <Image source={ Assets.img.icons.export_linear_icon } style={{ width: 20, height: 20, resizeMode: 'contain', marginBottom: 5 }}/>\n                    <Text style={[Typography.Light, Typography.Little]}>Export</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity style={ Shape.MediaMenuIcon } activeOpacity={ .5 } onPress={ @delete }>\n                    <Image source={ Assets.img.icons.trash_linear_icon } style={{ width: 20, height: 20, resizeMode: 'contain', marginBottom: 5 }}/>\n                    <Text style={[Typography.Light, Typography.Little]}>Delete</Text>\n                  </TouchableOpacity>\n                </View>\n              else\n                <StatusBar hidden={ yes }/>\n            }\n          </View>\n      }\n    </View>\n\n\n\nShape = StyleSheet.create\n  Box:\n    flex: 1\n    width: '100%'\n    backgroundColor: 'black'\n\n  Content:\n    flex: 1\n    alignItems: 'center'\n    justifyContent: 'center'\n\n  MediaSlider:\n    alignItems: 'center'\n    justifyContent: 'center'\n\n  MediaSliderItem:\n    flex: 1\n    width: '100%'\n    alignItems: 'center'\n    justifyContent: 'center'\n    overflow: 'hidden'\n\n  MediaMenu:\n    position: 'absolute'\n    width: '100%'\n    height: 56\n    alignItems: 'center'\n    flexDirection: 'row'\n    justifyContent: 'space-between'\n    backgroundColor: 'rgba(0,0,0,.2)'\n\n  MediaMenuIcon:\n    alignItems: 'center'\n    justifyContent: 'center'\n\n\n\nexport default Hybrid MediaViewer\n"
  ]
}